<main class="main-container">
  <header>
    <h1>{{ title }}</h1>
  </header>

  <section class="input-section">
    <input type="text" placeholder="What needs to be done?" [ngModel]="newTodoTitle()"
      (ngModelChange)="newTodoTitle.set($event)" (keyup.enter)="addTodo()">
    <button class="add-btn" (click)="addTodo()">Add Task</button>
  </section>

  <section class="filter-section">
    <button [class.active]="filter() === 'all'" (click)="setFilter('all')">All</button>
    <button [class.active]="filter() === 'pending'" (click)="setFilter('pending')">Pending</button>
    <button [class.active]="filter() === 'on-hold'" (click)="setFilter('on-hold')">On Hold</button>
    <button [class.active]="filter() === 'completed'" (click)="setFilter('completed')">Completed</button>
  </section>

  <section class="todo-list">
    @for (todo of filteredTodos; track todo.id) {
    <div class="todo-item" [class.completed]="todo.status === 'completed'">
      <div class="todo-content">
        <span class="status-badge" [class]="todo.status">{{ todo.status }}</span>
        <span class="todo-text">{{ todo.title }}</span>
      </div>

      <div class="todo-actions">
        @if (todo.status !== 'completed') {
        <button class="action-btn complete-btn" (click)="changeStatus(todo.id, 'completed')" title="Mark as Completed">
          ✓
        </button>
        }
        @if (todo.status === 'pending') {
        <button class="action-btn hold-btn" (click)="changeStatus(todo.id, 'on-hold')" title="Put on Hold">
          ⏸
        </button>
        }
        @if (todo.status === 'on-hold') {
        <button class="action-btn resume-btn" (click)="changeStatus(todo.id, 'pending')" title="Resume">
          ▶
        </button>
        }
        <button class="action-btn delete-btn" (click)="deleteTodo(todo.id)" title="Delete">
          ✕
        </button>
      </div>
    </div>
    } @empty {
    <div class="empty-state">
      <p>No tasks found.</p>
    </div>
    }
  </section>
</main>

<router-outlet />